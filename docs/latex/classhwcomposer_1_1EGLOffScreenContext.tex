\hypertarget{classhwcomposer_1_1EGLOffScreenContext}{}\section{hwcomposer\+:\+:E\+G\+L\+Off\+Screen\+Context Class Reference}
\label{classhwcomposer_1_1EGLOffScreenContext}\index{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}}


{\ttfamily \#include $<$egloffscreencontext.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classhwcomposer_1_1EGLOffScreenContext_ad90e8e959cbcfab300b9e240d39d8b26}{E\+G\+L\+Off\+Screen\+Context}} ()
\item 
\mbox{\hyperlink{classhwcomposer_1_1EGLOffScreenContext_ace13930052a6c2461e8143abbc89bb53}{$\sim$\+E\+G\+L\+Off\+Screen\+Context}} ()
\item 
bool \mbox{\hyperlink{classhwcomposer_1_1EGLOffScreenContext_a70b98f401e88080f13a6df4b2cc4c8e2}{Init}} ()
\item 
E\+G\+Lint \mbox{\hyperlink{classhwcomposer_1_1EGLOffScreenContext_a8f98b9bb56923114d3d4c6051968e543}{Get\+Sync\+FD}} ()
\item 
E\+G\+L\+Display \mbox{\hyperlink{classhwcomposer_1_1EGLOffScreenContext_a8fbaabaa0eb7d4c18143932d44d68ee2}{Get\+Display}} () const
\item 
bool \mbox{\hyperlink{classhwcomposer_1_1EGLOffScreenContext_a6a02ca4cb2ad6f22af3343ac473baf2a}{Make\+Current}} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 24 of file egloffscreencontext.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classhwcomposer_1_1EGLOffScreenContext_ad90e8e959cbcfab300b9e240d39d8b26}\label{classhwcomposer_1_1EGLOffScreenContext_ad90e8e959cbcfab300b9e240d39d8b26}} 
\index{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}!E\+G\+L\+Off\+Screen\+Context@{E\+G\+L\+Off\+Screen\+Context}}
\index{E\+G\+L\+Off\+Screen\+Context@{E\+G\+L\+Off\+Screen\+Context}!hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}}
\subsubsection{\texorpdfstring{E\+G\+L\+Off\+Screen\+Context()}{EGLOffScreenContext()}}
{\footnotesize\ttfamily hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context\+::\+E\+G\+L\+Off\+Screen\+Context (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 23 of file egloffscreencontext.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{24     : egl\_display\_(EGL\_NO\_DISPLAY), egl\_ctx\_(EGL\_NO\_CONTEXT) \{}
\DoxyCodeLine{25 \}}
\end{DoxyCode}
\mbox{\Hypertarget{classhwcomposer_1_1EGLOffScreenContext_ace13930052a6c2461e8143abbc89bb53}\label{classhwcomposer_1_1EGLOffScreenContext_ace13930052a6c2461e8143abbc89bb53}} 
\index{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}!````~E\+G\+L\+Off\+Screen\+Context@{$\sim$\+E\+G\+L\+Off\+Screen\+Context}}
\index{````~E\+G\+L\+Off\+Screen\+Context@{$\sim$\+E\+G\+L\+Off\+Screen\+Context}!hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}}
\subsubsection{\texorpdfstring{$\sim$\+E\+G\+L\+Off\+Screen\+Context()}{~EGLOffScreenContext()}}
{\footnotesize\ttfamily hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context\+::$\sim$\+E\+G\+L\+Off\+Screen\+Context (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 27 of file egloffscreencontext.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{27                                           \{}
\DoxyCodeLine{28   \textcolor{keywordflow}{if} (egl\_display\_ != EGL\_NO\_DISPLAY \&\& egl\_ctx\_ != EGL\_NO\_CONTEXT)}
\DoxyCodeLine{29     \textcolor{keywordflow}{if} (eglDestroyContext(egl\_display\_, egl\_ctx\_) == EGL\_FALSE)}
\DoxyCodeLine{30       \mbox{\hyperlink{alios_2platformdefines_8h_a226d6c99e4bcfca193c095e085e9097d}{ETRACE}}(\textcolor{stringliteral}{"Failed to destroy OpenGL ES Context."});}
\DoxyCodeLine{31 \}}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classhwcomposer_1_1EGLOffScreenContext_a8fbaabaa0eb7d4c18143932d44d68ee2}\label{classhwcomposer_1_1EGLOffScreenContext_a8fbaabaa0eb7d4c18143932d44d68ee2}} 
\index{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}!Get\+Display@{Get\+Display}}
\index{Get\+Display@{Get\+Display}!hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}}
\subsubsection{\texorpdfstring{Get\+Display()}{GetDisplay()}}
{\footnotesize\ttfamily E\+G\+L\+Display hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context\+::\+Get\+Display (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 33 of file egloffscreencontext.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{33                                 \{}
\DoxyCodeLine{34     \textcolor{keywordflow}{return} egl\_display\_;}
\DoxyCodeLine{35   \}}
\end{DoxyCode}
\mbox{\Hypertarget{classhwcomposer_1_1EGLOffScreenContext_a8f98b9bb56923114d3d4c6051968e543}\label{classhwcomposer_1_1EGLOffScreenContext_a8f98b9bb56923114d3d4c6051968e543}} 
\index{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}!Get\+Sync\+FD@{Get\+Sync\+FD}}
\index{Get\+Sync\+FD@{Get\+Sync\+FD}!hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}}
\subsubsection{\texorpdfstring{Get\+Sync\+F\+D()}{GetSyncFD()}}
{\footnotesize\ttfamily E\+G\+Lint hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context\+::\+Get\+Sync\+FD (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 90 of file egloffscreencontext.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{90                                       \{}
\DoxyCodeLine{91   EGLint sync\_fd = -1;}
\DoxyCodeLine{92 }
\DoxyCodeLine{93   EGLSyncKHR egl\_sync =}
\DoxyCodeLine{94       \mbox{\hyperlink{namespacehwcomposer_aa4f7bf2ebb58d75fd8c42abff106d278}{eglCreateSyncKHR}}(egl\_display\_, EGL\_SYNC\_NATIVE\_FENCE\_ANDROID, 
      \mbox{\hyperlink{alios_2platformdefines_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{95   \textcolor{keywordflow}{if} (egl\_sync == EGL\_NO\_SYNC\_KHR) \{}
\DoxyCodeLine{96     \mbox{\hyperlink{alios_2platformdefines_8h_a226d6c99e4bcfca193c095e085e9097d}{ETRACE}}(\textcolor{stringliteral}{"Failed to make sync object."});}
\DoxyCodeLine{97     \textcolor{keywordflow}{return} -1;}
\DoxyCodeLine{98   \}}
\DoxyCodeLine{99 }
\DoxyCodeLine{100   sync\_fd = \mbox{\hyperlink{namespacehwcomposer_a25459e53d7cddc64d03b86d5c6a961a3}{eglDupNativeFenceFDANDROID}}(egl\_display\_, egl\_sync);}
\DoxyCodeLine{101   \textcolor{keywordflow}{if} (sync\_fd == EGL\_NO\_NATIVE\_FENCE\_FD\_ANDROID) \{}
\DoxyCodeLine{102     \mbox{\hyperlink{alios_2platformdefines_8h_a226d6c99e4bcfca193c095e085e9097d}{ETRACE}}(\textcolor{stringliteral}{"Failed to duplicate native fence object."});}
\DoxyCodeLine{103     sync\_fd = -1;}
\DoxyCodeLine{104   \}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106   \mbox{\hyperlink{namespacehwcomposer_afdd4be68020d78ee60456fbb07576228}{eglDestroySyncKHR}}(egl\_display\_, egl\_sync);}
\DoxyCodeLine{107 }
\DoxyCodeLine{108   \textcolor{keywordflow}{return} sync\_fd;}
\DoxyCodeLine{109 \}}
\end{DoxyCode}
\mbox{\Hypertarget{classhwcomposer_1_1EGLOffScreenContext_a70b98f401e88080f13a6df4b2cc4c8e2}\label{classhwcomposer_1_1EGLOffScreenContext_a70b98f401e88080f13a6df4b2cc4c8e2}} 
\index{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}!Init@{Init}}
\index{Init@{Init}!hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}}
\subsubsection{\texorpdfstring{Init()}{Init()}}
{\footnotesize\ttfamily bool hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context\+::\+Init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 33 of file egloffscreencontext.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{33                                \{}
\DoxyCodeLine{34   EGLint num\_configs;}
\DoxyCodeLine{35   EGLConfig egl\_config;}
\DoxyCodeLine{36   \textcolor{keyword}{static} \textcolor{keyword}{const} EGLint context\_attribs[] = \{}
\DoxyCodeLine{37       EGL\_CONTEXT\_CLIENT\_VERSION, 3, EGL\_CONTEXT\_PRIORITY\_LEVEL\_IMG,}
\DoxyCodeLine{38       EGL\_CONTEXT\_PRIORITY\_HIGH\_IMG, EGL\_NONE\};}
\DoxyCodeLine{39 }
\DoxyCodeLine{40   \textcolor{keyword}{static} \textcolor{keyword}{const} EGLint config\_attribs[] = \{EGL\_SURFACE\_TYPE, EGL\_DONT\_CARE,}
\DoxyCodeLine{41                                           EGL\_NONE\};}
\DoxyCodeLine{42 }
\DoxyCodeLine{43   egl\_display\_ = eglGetDisplay(EGL\_DEFAULT\_DISPLAY);}
\DoxyCodeLine{44   \textcolor{keywordflow}{if} (egl\_display\_ == EGL\_NO\_DISPLAY) \{}
\DoxyCodeLine{45     \mbox{\hyperlink{alios_2platformdefines_8h_a226d6c99e4bcfca193c095e085e9097d}{ETRACE}}(\textcolor{stringliteral}{"Failed to get egl display"});}
\DoxyCodeLine{46     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{47   \}}
\DoxyCodeLine{48 }
\DoxyCodeLine{49   \textcolor{keywordflow}{if} (!eglInitialize(egl\_display\_, \mbox{\hyperlink{alios_2platformdefines_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}, \mbox{\hyperlink{alios_2platformdefines_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})) \{}
\DoxyCodeLine{50     \mbox{\hyperlink{alios_2platformdefines_8h_a226d6c99e4bcfca193c095e085e9097d}{ETRACE}}(\textcolor{stringliteral}{"Egl Initialization failed."});}
\DoxyCodeLine{51     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{52   \}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54   \textcolor{keywordflow}{if} (!eglChooseConfig(egl\_display\_, config\_attribs, \&egl\_config, 1,}
\DoxyCodeLine{55                        \&num\_configs)) \{}
\DoxyCodeLine{56     \mbox{\hyperlink{alios_2platformdefines_8h_a226d6c99e4bcfca193c095e085e9097d}{ETRACE}}(\textcolor{stringliteral}{"Failed to choose a valid EGLConfig."});}
\DoxyCodeLine{57     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{58   \}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60   egl\_ctx\_ = eglCreateContext(egl\_display\_, egl\_config, EGL\_NO\_CONTEXT,}
\DoxyCodeLine{61                               context\_attribs);}
\DoxyCodeLine{62 }
\DoxyCodeLine{63   \textcolor{keywordflow}{if} (egl\_ctx\_ == EGL\_NO\_CONTEXT) \{}
\DoxyCodeLine{64     \mbox{\hyperlink{alios_2platformdefines_8h_a226d6c99e4bcfca193c095e085e9097d}{ETRACE}}(\textcolor{stringliteral}{"Failed to create EGL Context."});}
\DoxyCodeLine{65     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{66   \}}
\DoxyCodeLine{67 }
\DoxyCodeLine{68   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{69 \}}
\end{DoxyCode}
\mbox{\Hypertarget{classhwcomposer_1_1EGLOffScreenContext_a6a02ca4cb2ad6f22af3343ac473baf2a}\label{classhwcomposer_1_1EGLOffScreenContext_a6a02ca4cb2ad6f22af3343ac473baf2a}} 
\index{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}!Make\+Current@{Make\+Current}}
\index{Make\+Current@{Make\+Current}!hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context@{hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context}}
\subsubsection{\texorpdfstring{Make\+Current()}{MakeCurrent()}}
{\footnotesize\ttfamily bool hwcomposer\+::\+E\+G\+L\+Off\+Screen\+Context\+::\+Make\+Current (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 71 of file egloffscreencontext.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{71                                       \{}
\DoxyCodeLine{72   saved\_egl\_display\_ = eglGetCurrentDisplay();}
\DoxyCodeLine{73   saved\_egl\_ctx\_ = eglGetCurrentContext();}
\DoxyCodeLine{74   saved\_egl\_read\_ = eglGetCurrentSurface(EGL\_READ);}
\DoxyCodeLine{75   saved\_egl\_draw\_ = eglGetCurrentSurface(EGL\_DRAW);}
\DoxyCodeLine{76 }
\DoxyCodeLine{77   \textcolor{keywordflow}{if} (saved\_egl\_display\_ != egl\_display\_ || saved\_egl\_ctx\_ != egl\_ctx\_ ||}
\DoxyCodeLine{78       saved\_egl\_read\_ != EGL\_NO\_SURFACE || saved\_egl\_draw\_ != EGL\_NO\_SURFACE) \{}
\DoxyCodeLine{79     \textcolor{keywordflow}{if} (eglMakeCurrent(egl\_display\_, EGL\_NO\_SURFACE, EGL\_NO\_SURFACE,}
\DoxyCodeLine{80                        egl\_ctx\_)) \{}
\DoxyCodeLine{81     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{82       \mbox{\hyperlink{alios_2platformdefines_8h_a226d6c99e4bcfca193c095e085e9097d}{ETRACE}}(\textcolor{stringliteral}{"failed to make context current"});}
\DoxyCodeLine{83       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{84     \}}
\DoxyCodeLine{85   \}}
\DoxyCodeLine{86 }
\DoxyCodeLine{87   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{88 \}}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
common/compositor/gl/\mbox{\hyperlink{egloffscreencontext_8h}{egloffscreencontext.\+h}}\item 
common/compositor/gl/\mbox{\hyperlink{egloffscreencontext_8cpp}{egloffscreencontext.\+cpp}}\end{DoxyCompactItemize}
